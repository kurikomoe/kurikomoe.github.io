"use strict";(self.webpackChunkfuwafuwataimu=self.webpackChunkfuwafuwataimu||[]).push([[532],{1770:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(7222);const a=["innerHTML"];var r=n(8177);const{detect:s}=n(2041),o=s(),c={name:"markdown",props:{content:null,more:null},data(){return{path:window.location.href,author:"Kuriko Moe（栗子Chan）",isBrief:null===this.content,isCodeRendered:!1,isMathJaxRendered:!1,checkHandler:[]}},methods:{async updateContents(){window.MathJax&&(await window.MathJax.typesetPromise(),this.isMathJaxRendered=!0),window.Prism&&this.$refs.markdownEl&&window.Prism.highlightAllUnder(this.$refs.markdownEl,!1,(()=>{this.isCodeRendered=!0})),this.isCodeRendered&&this.isCodeRendered&&this.$emit("finished")}},mounted(){r.Z.imgProcess(this.$refs.markdownEl,!this.isBrief),this.$refs.markdownEl.querySelectorAll("spoiler").forEach((async e=>{switch(e.setAttribute("title",this.$t("other.spoiler")),o&&o.name){case"safari":case"ios":e.classList.add("safari-fix");break;case"chrome":e.classList.add("chrome-fix")}})),this.$nextTick((()=>{let e;this.updateContents(),e=r.Z.doCheck("MathJax",(()=>window.MathJax),this.updateContents),this.checkHandler.push(e),e=r.Z.doCheck("Prism.js",(()=>window.Prism),this.updateContents),this.checkHandler.push(e)}))},created(){},updated(){},destroyed(){for(let e of this.checkHandler)clearInterval(e)}};const l=(0,n(9022).Z)(c,[["render",function(e,t,n,r,s,o){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"match-braces post-content markdown-body",ref:"markdownEl",innerHTML:n.content||n.more},null,8,a)}],["__scopeId","data-v-664d9880"]])},5302:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(2424),a=n.n(i),r=n(8147);const s=n(3023),o=a().create({headers:{get:{"Cache-Control":"no-cache"}}});function c(e){return o.get(r.Z.api.posts_index(e)).then((e=>e.data))}function l(e){return new Promise((t=>setTimeout(t,e)))}async function d(e,t=(e=>-1!==e),n=-1,i=r.Z.other.max_retry_times,a=r.Z.other.retry_interval){for(let n=0;n<i;n+=1){const n=await e();if(t(n))return n;await l(a)}return n}function u(e,t){const n=`${r.Z.valine.ApiHost}/Comment`;let i=`?where={"$or":[{"rid":{"$exists":false}},{"rid":""}],"url":"${e}"}&order=-createdAt,-insertedAt&limit=0&count=1`;i=`${n}${encodeURI(i)}`;const a=function(e){const t=(new Date).getTime();return{sign:s(t+e),timestamp:t}}(r.Z.valine.AppKey),c={"X-LC-Id":r.Z.valine.AppID,"X-LC-Sign":`${a.sign},${a.timestamp}`,"X-LC-UA":r.Z.valine.UA};return d((()=>o.get(i,{timeout:r.Z.other.timeout,headers:c,cancelToken:t.token}).then((e=>e.data.count)).catch((e=>-1))),(e=>-1!==e),-1,1)}const h={getPostDetails:function(e,t,n){return o.get(function(e,t){return r.Z.api.post(e,t)}(e,t)).then(n).catch(console.error)},getPostsInfo:c,getAllPosts:async function(){const e=await c(1),t=e.pageCount,n=[];let i=[e];for(let e=2;e<=t;e+=1)i.push(c(e));i=await Promise.all(i);for(let e=0;e<i.length;e+=1)for(let t=0;t<i[e].data.length;t+=1)n.push(i[e].data[t]);return{total:n.length,pageSize:n.length,pageCount:1,data:n}},getTagsInfo:function(){return o.get(r.Z.api.tags).then((e=>e.data))},getCommentCount:async function(e,t){return u(e,t)},checkDisqusAccess:async function(){for(let e=0;e<1;e+=1){if(await o.head("https://disqus.com/next/config.json",{timeout:r.Z.other.timeout}).then((()=>!0)).catch((e=>!1)))return!0;await l(r.Z.other.retry_interval)}return!1},sleep:l}},8147:(e,t,n)=>{n.d(t,{Z:()=>p});const i=n(3736);const a={urljoin:function(...e){const t=e.map((e=>encodeURI(e)));return i(t)}},r="https://avoscloud.com/1.1/classes",s="OeEtcHlTwNanGrrmpR3YA6Aa-gzGzoHsz",o="CuRwM3LRXOFfCT9iH1yUpV8h",c="LeanCloud-JS-SDK/3.15.0 (Browser)",l="!watermark_orig",d="!watermark_orig",u="/",h="/",m=u,p={other:{isDebug:false,max_retry_times:3,retry_interval:1e3,timeout:1500,img_height_width_ratio:2},api:{site:a.urljoin(m,"api/site.json"),posts:a.urljoin(m,"api/posts.json"),posts_index:e=>a.urljoin(m,"api/posts/",`${e}.json`),post:(e,t)=>a.urljoin(m,"api/articles",t.join("/"),`${e}.json`),tags:a.urljoin(m,"api/tags.json")},post:{max_heading_length:32,omit_indicator:"...",aside_deepest_heading_level:3},gitalk:{clientID:"4c7a5aea202233a50462",clientSecret:"2a4cf51e76cca79a256f5746dcf81a49e802439b",repo:"fuwafuwa-blog",owner:"kurikomoe",admin:["kurikomoe"]},disqus:{shortname:"kurikomoe",public_key:"MnMSTZVAi6lGgbxnhC7pvRn9izcGJpQrKCHTtkxYIoyr3Uo9NU9DDxvcLSKhNl8c"},valine:{ApiHost:r,AppID:s,AppKey:o,UA:c},cos:{fileURL:u,imageURL:h,imageStyleSmall:l,imageStyleLarge:d,image_process:{webp_cmd:e=>`${e}?imageView2/format/webp`,png_cmd:e=>`${e}?imageView2/format/png`}}}},8177:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8119),a=n(8147);const r={imgProcess:function(e,t=!1,n=!1){e.querySelectorAll("img").forEach((e=>{let t,r,s=e.src;s.includes("?none")?(s=e.src.replace("?none",""),t=s,r=s):n||"/"===a.Z.cos.imageURL||!s.includes(a.Z.cos.imageURL)?(t=s,r=s):(t=s+a.Z.cos.imageStyleSmall,r=s+a.Z.cos.imageStyleLarge),e.setAttribute("src",t);const o=document.createElement("picture");e.addEventListener("load",(()=>{e.clientHeight>e.clientWidth*a.Z.other.img_height_width_ratio&&(o.setAttribute("data-expand",i.Z.t("other.img_load_more")),o.style["max-height"]=.618*e.clientWidth+"px",o.classList.add("limit-img-height"))}),!0);const c=document.createElement("source");c.setAttribute("srcset",a.Z.cos.image_process.webp_cmd(t)),c.setAttribute("type","image/webp");const l=document.createElement("source");l.setAttribute("srcset",a.Z.cos.image_process.png_cmd(t)),l.setAttribute("type","image/png");const d=document.createElement("a");d.setAttribute("data-fancybox","gallery"),d.setAttribute("href",r),e.parentElement.insertBefore(d,e),d.appendChild(o),o.appendChild(c),o.appendChild(l),o.appendChild(e)}))},doCheck:function(e,t,n,i=5,a=500,r=!1){let s=0;const o=setInterval((()=>{if(s+=1,s>=i);else{if(!t())return;n()}clearInterval(o)}),a);return o}}}}]);